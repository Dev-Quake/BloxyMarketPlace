<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marketplace | Roblox Marketplace</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Additional styles for marketplace */
        .listing-card {
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid #333;
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.3s;
            height: 100%;
        }
        
        .listing-card:hover {
            border-color: #8b0000;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(139, 0, 0, 0.1);
        }
        
        .listing-image {
            width: 100%;
            height: 200px;
            background: rgba(30, 30, 30, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .listing-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .listing-image .placeholder {
            color: #666;
            font-size: 3rem;
        }
        
        .listing-content {
            padding: 20px;
        }
        
        .listing-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #f0f0f0;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        
        .listing-price {
            font-size: 1.5rem;
            font-weight: 900;
            color: #8b0000;
            margin-bottom: 15px;
        }
        
        .listing-creator {
            color: #b0b0b0;
            font-size: 0.95rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .listing-creator i {
            color: #8b0000;
        }
        
        .listing-category {
            display: inline-block;
            background: rgba(139, 0, 0, 0.1);
            color: #8b0000;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .listing-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #333;
        }
        
        .listing-contact {
            background: rgba(139, 0, 0, 0.1);
            color: #8b0000;
            border: 1px solid #8b0000;
            padding: 8px 15px;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }
        
        .listing-contact:hover {
            background: rgba(139, 0, 0, 0.2);
            transform: translateY(-2px);
        }
        
        .marketplace-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }
        
        .filter-section {
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid #333;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 40px;
        }
        
        .filter-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .filter-group {
            flex: 1;
            min-width: 200px;
        }
        
        .filter-label {
            display: block;
            color: #f0f0f0;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .filter-select, .filter-input {
            width: 100%;
            padding: 10px 15px;
            background: rgba(30, 30, 30, 0.8);
            border: 1px solid #333;
            border-radius: 6px;
            color: #f0f0f0;
            font-size: 0.95rem;
        }
        
        .no-listings {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }
        
        .no-listings i {
            font-size: 3rem;
            margin-bottom: 20px;
            opacity: 0.3;
        }
        
        @media (max-width: 768px) {
            .marketplace-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }
            
            .filter-row {
                flex-direction: column;
                gap: 15px;
            }
            
            .filter-group {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- HEADER - EXACT COPY FROM INDEX.HTML -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">ROBLOX<span>MARKET</span></a>
                
                <nav>
                    <ul>
                        <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                        <li><a href="#" class="active"><i class="fas fa-store"></i> Store</a></li>
                        <li><a href="dashboard.html"><i class="fas fa-user"></i> Dashboard</a></li>
                        <li><a href="create.html"><i class="fas fa-plus-circle"></i> Create</a></li>
                    </ul>
                </nav>
                
                <div class="auth-buttons">
                    <!-- Dynamic auth buttons from script.js -->
                </div>
            </div>
        </div>
    </header>

    <!-- MARKETPLACE CONTENT -->
    <section class="marketplace" style="margin-top: 120px; padding: 60px 0;">
        <div class="container">
            <h1 class="glitch" data-text="Marketplace" style="font-size: 3rem; margin-bottom: 10px; text-align: center;">Marketplace</h1>
            <p style="color: #b0b0b0; text-align: center; margin-bottom: 40px; font-size: 1.1rem;">
                Browse approved listings from our community
            </p>

            <!-- Search and Filters -->
            <div class="filter-section">
                <div class="filter-row">
                    <div class="filter-group">
                        <label class="filter-label"><i class="fas fa-search"></i> Search Listings</label>
                        <input type="text" class="filter-input" placeholder="Search by title, tags, or creator...">
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label"><i class="fas fa-filter"></i> Category</label>
                        <select class="filter-select">
                            <option value="">All Categories</option>
                            <option value="scripting">Scripting</option>
                            <option value="building">Building</option>
                            <option value="gui">GUI Design</option>
                            <option value="animation">Animation</option>
                            <option value="plugin">Plugins</option>
                            <option value="model">3D Models</option>
                            <option value="sound">Audio/Sound</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label"><i class="fas fa-sort"></i> Sort By</label>
                        <select class="filter-select">
                            <option value="newest">Newest First</option>
                            <option value="oldest">Oldest First</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="price-high">Price: High to Low</option>
                            <option value="popular">Most Popular</option>
                        </select>
                    </div>
                </div>
                
                <div style="display: flex; gap: 15px; margin-top: 20px;">
                    <button id="apply-filters" class="btn btn-primary" style="padding: 10px 25px;">
                        <i class="fas fa-filter"></i> Apply Filters
                    </button>
                    <button id="reset-filters" class="btn btn-secondary" style="padding: 10px 25px;">
                        <i class="fas fa-redo"></i> Reset
                    </button>
                </div>
            </div>

            <!-- Listings Grid -->
            <div class="marketplace-grid" id="listings-container">
                <!-- Listing Card 1 -->
                <div class="listing-card">
                    <div class="listing-image">
                        <!-- Image placeholder - replace with actual image -->
                        <div class="placeholder">
                            <i class="fas fa-cube"></i>
                        </div>
                        <!-- For actual image: <img src="path/to/image.jpg" alt="Advanced Combat System"> -->
                    </div>
                    <div class="listing-content">
                        <h3 class="listing-title">Advanced Combat System</h3>
                        <div class="listing-price">$50.00 USD</div>
                        <div class="listing-creator">
                            <i class="fas fa-user"></i> Created by: ProScripter
                        </div>
                        <div class="listing-category">Scripting</div>
                        <div class="listing-footer">
                            <a href="listing.html" class="listing-contact">
                                <i class="fab fa-discord"></i> Contact Seller
                            </a>
                            <div style="color: #666; font-size: 0.85rem;">
                                <i class="far fa-eye"></i> 142
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Listing Card 2 -->
                <div class="listing-card">
                    <div class="listing-image">
                        <div class="placeholder">
                            <i class="fas fa-paint-brush"></i>
                        </div>
                    </div>
                    <div class="listing-content">
                        <h3 class="listing-title">Modern GUI Pack</h3>
                        <div class="listing-price">$30.00 USD</div>
                        <div class="listing-creator">
                            <i class="fas fa-user"></i> Created by: UIGuy
                        </div>
                        <div class="listing-category">GUI Design</div>
                        <div class="listing-footer">
                            <a href="listing.html" class="listing-contact">
                                <i class="fab fa-discord"></i> Contact Seller
                            </a>
                            <div style="color: #666; font-size: 0.85rem;">
                                <i class="far fa-eye"></i> 89
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Listing Card 3 -->
                <div class="listing-card">
                    <div class="listing-image">
                        <div class="placeholder">
                            <i class="fas fa-landmark"></i>
                        </div>
                    </div>
                    <div class="listing-content">
                        <h3 class="listing-title">Medieval Castle Building</h3>
                        <div class="listing-price">$75.00 USD</div>
                        <div class="listing-creator">
                            <i class="fas fa-user"></i> Created by: CastleBuilder
                        </div>
                        <div class="listing-category">Building</div>
                        <div class="listing-footer">
                            <a href="listing.html" class="listing-contact">
                                <i class="fab fa-discord"></i> Contact Seller
                            </a>
                            <div style="color: #666; font-size: 0.85rem;">
                                <i class="far fa-eye"></i> 203
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Listing Card 4 -->
                <div class="listing-card">
                    <div class="listing-image">
                        <div class="placeholder">
                            <i class="fas fa-robot"></i>
                        </div>
                    </div>
                    <div class="listing-content">
                        <h3 class="listing-title">NPC AI System</h3>
                        <div class="listing-price">$40.00 USD</div>
                        <div class="listing-creator">
                            <i class="fas fa-user"></i> Created by: AI_Dev
                        </div>
                        <div class="listing-category">Scripting</div>
                        <div class="listing-footer">
                            <a href="listing.html" class="listing-contact">
                                <i class="fab fa-discord"></i> Contact Seller
                            </a>
                            <div style="color: #666; font-size: 0.85rem;">
                                <i class="far fa-eye"></i> 56
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Listing Card 5 -->
                <div class="listing-card">
                    <div class="listing-image">
                        <div class="placeholder">
                            <i class="fas fa-music"></i>
                        </div>
                    </div>
                    <div class="listing-content">
                        <h3 class="listing-title">Custom Sound Pack</h3>
                        <div class="listing-price">$15.00 USD</div>
                        <div class="listing-creator">
                            <i class="fas fa-user"></i> Created by: SoundMaster
                        </div>
                        <div class="listing-category">Audio/Sound</div>
                        <div class="listing-footer">
                            <a href="listing.html" class="listing-contact">
                                <i class="fab fa-discord"></i> Contact Seller
                            </a>
                            <div style="color: #666; font-size: 0.85rem;">
                                <i class="far fa-eye"></i> 34
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Listing Card 6 -->
                <div class="listing-card">
                    <div class="listing-image">
                        <div class="placeholder">
                            <i class="fas fa-running"></i>
                        </div>
                    </div>
                    <div class="listing-content">
                        <h3 class="listing-title">Animation Pack Bundle</h3>
                        <div class="listing-price">$25.00 USD</div>
                        <div class="listing-creator">
                            <i class="fas fa-user"></i> Created by: AnimatorPro
                        </div>
                        <div class="listing-category">Animation</div>
                        <div class="listing-footer">
                            <a href="listing.html" class="listing-contact">
                                <i class="fab fa-discord"></i> Contact Seller
                            </a>
                            <div style="color: #666; font-size: 0.85rem;">
                                <i class="far fa-eye"></i> 78
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Load More Button -->
            <div style="text-align: center; margin-top: 50px;">
                <button id="load-more" class="btn btn-secondary" style="padding: 12px 40px;">
                    <i class="fas fa-sync-alt"></i> Load More Listings
                </button>
            </div>
        </div>
    </section>

    <!-- FOOTER - EXACT COPY FROM INDEX.HTML -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 class="logo">ROBLOX<span>MARKET</span></h3>
                    <p class="footer-text">The ultimate marketplace for Roblox creators and developers.</p>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-discord"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-youtube"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-github"></i></a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h4>Marketplace</h4>
                    <ul class="footer-links">
                        <li><a href="store.html">Browse Assets</a></li>
                        <li><a href="create.html">Sell Your Items</a></li>
                        <li><a href="#">Featured</a></li>
                        <li><a href="#">Top Sellers</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Freelance</h4>
                    <ul class="footer-links">
                        <li><a href="#">Find Developers</a></li>
                        <li><a href="#">Post a Job</a></li>
                        <li><a href="#">Freelancer Profiles</a></li>
                        <li><a href="#">Hire Guides</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul class="footer-links">
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Safety & Trust</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 RobloxMarket. Not affiliated with Roblox Corporation.</p>
                <div class="payment-methods">
                    <i class="fab fa-cc-visa"></i>
                    <i class="fab fa-cc-mastercard"></i>
                    <i class="fab fa-cc-paypal"></i>
                    <i class="fas fa-coins"></i>
                </div>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Filter functionality
            const applyFiltersBtn = document.getElementById('apply-filters');
            const resetFiltersBtn = document.getElementById('reset-filters');
            
            applyFiltersBtn.addEventListener('click', function() {
                // In a real app, this would filter the listings
                alert('Filters applied! (This is a demo - in real app would filter listings)');
            });
            
            resetFiltersBtn.addEventListener('click', function() {
                const inputs = document.querySelectorAll('.filter-input, .filter-select');
                inputs.forEach(input => {
                    if (input.tagName === 'INPUT') {
                        input.value = '';
                    } else if (input.tagName === 'SELECT') {
                        input.selectedIndex = 0;
                    }
                });
            });
            
            // Load more functionality
            const loadMoreBtn = document.getElementById('load-more');
            const listingsContainer = document.getElementById('listings-container');
            
            loadMoreBtn.addEventListener('click', function() {
                const btn = this;
                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Loading...';
                btn.disabled = true;
                
                // Simulate loading more listings
                setTimeout(() => {
                    // Add more listing cards (in real app, fetch from API)
                    const newListings = `
                        <div class="listing-card">
                            <div class="listing-image">
                                <div class="placeholder">
                                    <i class="fas fa-code"></i>
                                </div>
                            </div>
                            <div class="listing-content">
                                <h3 class="listing-title">DataStore Module</h3>
                                <div class="listing-price">$20.00 USD</div>
                                <div class="listing-creator">
                                    <i class="fas fa-user"></i> Created by: DataPro
                                </div>
                                <div class="listing-category">Scripting</div>
                                <div class="listing-footer">
                                    <a href="listing.html" class="listing-contact">
                                        <i class="fab fa-discord"></i> Contact Seller
                                    </a>
                                    <div style="color: #666; font-size: 0.85rem;">
                                        <i class="far fa-eye"></i> 45
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="listing-card">
                            <div class="listing-image">
                                <div class="placeholder">
                                    <i class="fas fa-car"></i>
                                </div>
                            </div>
                            <div class="listing-content">
                                <h3 class="listing-title">Vehicle System</h3>
                                <div class="listing-price">$60.00 USD</div>
                                <div class="listing-creator">
                                    <i class="fas fa-user"></i> Created by: VehicleDev
                                </div>
                                <div class="listing-category">Scripting</div>
                                <div class="listing-footer">
                                    <a href="listing.html" class="listing-contact">
                                        <i class="fab fa-discord"></i> Contact Seller
                                    </a>
                                    <div style="color: #666; font-size: 0.85rem;">
                                        <i class="far fa-eye"></i> 67
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    listingsContainer.innerHTML += newListings;
                    
                    btn.innerHTML = '<i class="fas fa-sync-alt"></i> Load More Listings';
                    btn.disabled = false;
                    
                    // Hide button after loading enough (optional)
                    // if (listingsContainer.children.length >= 12) {
                    //     btn.style.display = 'none';
                    // }
                }, 1000);
            });
            
            // Contact seller functionality
            document.addEventListener('click', function(e) {
                if (e.target.closest('.listing-contact')) {
                    e.preventDefault();
                    
                    // Check if user is logged in
                    fetch('/api/user')
                        .then(response => response.json())
                        .then(data => {
                            if (data.authenticated) {
                                // Get listing info
                                const card = e.target.closest('.listing-card');
                                const title = card.querySelector('.listing-title').textContent;
                                const creator = card.querySelector('.listing-creator').textContent.replace('Created by: ', '');
                                
                                // Open Discord (simulated)
                                alert(`Opening Discord to contact ${creator} about "${title}"\n\nIn a real app, this would open Discord DMs with the seller.`);
                                
                                // In real app: window.open(`https://discord.com/users/${sellerDiscordId}`, '_blank');
                            } else {
                                alert('Please login with Discord first to contact sellers!');
                                window.location.href = '/api/auth/login';
                            }
                        })
                        .catch(error => {
                            console.error('Error checking auth:', error);
                            alert('Please login with Discord first to contact sellers!');
                            window.location.href = '/api/auth/login';
                        });
                }
            });
        });
    </script>
</body>
</html>